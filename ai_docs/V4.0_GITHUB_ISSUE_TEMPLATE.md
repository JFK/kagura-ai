# GitHub Issue Template: v4.0 Strategic Pivot

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ãã®ã¾ã¾GitHub Issueã«æŠ•ç¨¿ã§ãã¾ã™ã€‚

---

**Title**:
```
[RFC] Kagura v4.0: Strategic Pivot to Universal AI Memory Platform
```

**Labels**: `rfc`, `v4.0`, `strategic`, `discussion`

**Body**:

---

## ğŸ“‹ Summary

This RFC proposes a **strategic pivot** for Kagura AI from **Python SDK + Chat** (v3.0) to **Universal AI Memory & Context Platform** (v4.0).

**Core Change**:
> Kagura becomes a **memory layer** that all AI platforms (Claude, ChatGPT, Gemini, etc.) can access via MCP, rather than a standalone SDK/Chat tool.

**Tagline**:
> **Own your memory. Bring it to every AI.**

---

## ğŸ¯ Motivation

### Current State (v3.0)
- **SDK**: Python-first agent framework with `@agent` decorator
- **Chat**: Interactive CLI (bonus feature)
- **Position**: Developer tool for building AI agents

### Problems
1. **Context fragmentation**: Users lose memory when switching AI platforms
2. **Vendor lock-in**: Each platform has its own memory system
3. **Limited adoption**: SDK requires coding; Chat is niche

### Opportunity
- **MCP adoption**: OpenAI, Google confirmed supportï¼ˆ2025ï¼‰
- **Market need**: Users want **portable** memory across platforms
- **Competition**: Mem0 announced MCP support, but lacks full OSS + local-first

---

## ğŸ’¡ Proposed Solution

### v4.0: Universal AI Memory Platform

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Platforms (via MCP)                 â”‚
â”‚  Claude, ChatGPT, Gemini, Cursor, ...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†• MCP Protocol
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kagura Memory Hub (Core)               â”‚
â”‚  - Memory Manager (3-tier + Graph)      â”‚
â”‚  - RAG (Knowledge Base)                 â”‚
â”‚  - History Tracker (Vibe Coding)        â”‚
â”‚  - API Server (REST)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†• Storage
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SQLite + ChromaDB + NetworkX           â”‚
â”‚  pgvector (Cloud/Self-hosted)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Features**:
- **MCP-native**: Primary interface via Model Context Protocol
- **Memory-first**: Core value is memory/context management
- **Multi-deployment**: Local / Self-hosted / Cloudï¼ˆfutureï¼‰
- **Data portability**: Complete export/importï¼ˆJSONLï¼‰

---

## ğŸ—ï¸ Architecture Changes

### What Stays
- âœ… Core memory systemï¼ˆ3-tier: working/context/persistentï¼‰
- âœ… RAG with ChromaDB
- âœ… MCP serverï¼ˆenhancedï¼‰
- âœ… CLI toolsï¼ˆrefocusedï¼‰

### What Changes
- ğŸ”„ **Chat â†’ Minimal**ï¼ˆMCP testing onlyï¼‰
- ğŸ”„ **SDK â†’ Optional**ï¼ˆfor advanced usersï¼‰
- ğŸ”„ **Personal tools â†’ Removed**ï¼ˆnews, weather, recipesï¼‰
- ğŸ”„ **README â†’ Memory-first positioning**

### What's New
- ğŸ†• **REST API**ï¼ˆFastAPIï¼‰for Consumer App
- ğŸ†• **GraphMemory**ï¼ˆNetworkX - see #345ï¼‰
- ğŸ†• **Consolidation**ï¼ˆShort-term â†’ Long-termï¼‰
- ğŸ†• **Export/Import**ï¼ˆJSONL + attachmentsï¼‰
- ğŸ†• **Consumer App**ï¼ˆFlutter - iOS/Android/Desktopï¼‰
- ğŸ†• **Connectors**ï¼ˆGitHub, Calendar, Filesï¼‰

---

## ğŸ”Œ MCP Tools v1.0

Proposed MCP tools contract:

```python
# Core Memory
memory_store(text, kind, source, scope, tags, importance)
memory_recall(query, k, scope, include_graph)
memory_search(query, filter, limit)
memory_feedback(node_id, label, weight)
memory_delete(node_id)

# Graph Operations (#345)
memory_link(src_id, dst_id, rel_type, weight)
memory_query_graph(seed_ids, hops, rel_filters)
memory_record_interaction(ai_platform, query, response, meta)

# System
memory_metrics()
memory_export()
memory_import()
```

**Integration with #331**: MCP Enhancement Roadmap
- Tool managementï¼ˆ`kagura mcp tools`, `enable/disable`ï¼‰
- Claude Desktop auto-configurationï¼ˆ`kagura mcp install`ï¼‰
- Diagnosticsï¼ˆ`kagura mcp doctor`ï¼‰

---

## ğŸ—ºï¸ Roadmap

### v4.0.0 - Memory Platform Foundation (3 months)

**Phase A: MCP-First**ï¼ˆ1 monthï¼‰
- [ ] Core refactoringï¼ˆmemory-firstï¼‰
- [ ] REST APIï¼ˆFastAPIï¼‰
- [ ] MCP tools v1.0 implementation
- [ ] Tool management CLIï¼ˆ#331ï¼‰
- [ ] Documentation rewrite

**Phase B: GraphMemory**ï¼ˆ2 monthsï¼‰
- [ ] GraphMemory implementationï¼ˆ#345ï¼‰
- [ ] MCP graph tools
- [ ] Consolidationï¼ˆshort â†’ long-termï¼‰
- [ ] Export/Importï¼ˆJSONLï¼‰
- [ ] Stable release

**Launch**:
- [ ] v4.0.0 tag + PyPI
- [ ] Hacker News - "Show HN: Kagura - Universal Memory Layer for AI"
- [ ] Blog post, Reddit posts

### v4.1.0 - Self-hosted API & Consumer App (4-6 months)

**Phase C: Self-hosted**
- [ ] API authenticationï¼ˆAPI Key, OAuth2ï¼‰
- [ ] Production Docker setupï¼ˆPostgres + pgvector + Redisï¼‰
- [ ] Connectors: GitHub, Calendar, Files

**Phase D: Consumer App**ï¼ˆparallelï¼‰
- [ ] Flutter appï¼ˆiOS/Android/Desktopï¼‰
- [ ] Memory Browser, Graph Viewer, Insights
- [ ] App Store / Google Play submission

### v4.2.0 - Cloud & Enterprise (6-12 months)

**Phase E: Cloud SaaS**
- [ ] Multi-tenant architecture
- [ ] BYOK, RLS, SSO
- [ ] Team collaboration
- [ ] Billing system

See [V4.0_IMPLEMENTATION_ROADMAP.md](../ai_docs/V4.0_IMPLEMENTATION_ROADMAP.md) for details.

---

## ğŸ“Š Competitive Analysis

### Direct Competitors

| Feature | Mem0 | Zep | Anthropic MCP | **Kagura v4.0** |
|---------|------|-----|---------------|-----------------|
| **MCP** | âœ… 2025 | âŒ | âœ… Official | âœ… |
| **OSS** | âœ… SDK | âŒ | âœ… MIT | âœ… Apache 2.0 |
| **Local-first** | âŒ | âŒ | âœ… | âœ… |
| **Self-hosted** | â“ | âŒ | N/A | âœ… v4.1+ |
| **Graph Memory** | â“ | âœ… | âœ… | âœ… NetworkX |
| **RAG** | âœ… | âœ… | âŒ | âœ… |
| **Consumer App** | âŒ | âŒ | âŒ | âœ… v4.1 |
| **Vibe Coding** | âŒ | âŒ | âŒ | âœ… |

**Differentiation**:
- âœ… **Vibe Coding**: Developer interaction history tracking
- âœ… **Complete data portability**: Export/Import JSONL
- âœ… **3-tier deployment**: Local/Self-hosted/Cloud
- âœ… **Japanese-first**: Documentation, community

See [V4.0_COMPETITIVE_ANALYSIS.md](../ai_docs/V4.0_COMPETITIVE_ANALYSIS.md) for full analysis.

---

## ğŸ¯ Success Metrics

### Technical (v4.0)
- [ ] Setup time: < 10 minutes
- [ ] Recall@5: > 0.85
- [ ] p95 latency: < 100ms
- [ ] Export success rate: > 99%
- [ ] Test coverage: > 90%

### User Adoption (v4.0)
- [ ] 500 MAUï¼ˆMonthly Active Usersï¼‰
- [ ] 1,000 GitHub stars
- [ ] 50+ MCP installations
- [ ] NPS: 40+

### Business (v4.1+)
- [ ] 100 paying users
- [ ] $1,000 MRR
- [ ] 10+ custom connectorsï¼ˆcommunityï¼‰

---

## ğŸ¤” Open Questions

### 1. Repository Structure
**Options**:
- **A**: Monorepoç¶™ç¶šï¼ˆ`/core`, `/mcp`, `/api`, `/app`ï¼‰
- **B**: æ–°è¦ãƒªãƒã‚¸ãƒˆãƒª `kagura-memory`ï¼ˆcoreï¼‰ + æ—¢å­˜ `kagura-ai`ï¼ˆSDK/examplesï¼‰
- **C**: Monorepo + workspaceï¼ˆnpm styleï¼‰

**Recommendation**: **Option A**ï¼ˆmonorepoï¼‰for simplicity

### 2. Chatæ©Ÿèƒ½ã®æ‰±ã„
**Options**:
- **A**: å®Œå…¨å‰Šé™¤
- **B**: æœ€å°é™æ®‹ã™ï¼ˆMCP testingï¼‰
- **C**: æ©Ÿèƒ½ç¶­æŒï¼ˆåˆ¥é€”ãƒ¡ãƒ³ãƒ†ï¼‰

**Recommendation**: **Option B**ï¼ˆminimal for testingï¼‰

### 3. Consumer Appã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°
**Options**:
- **A**: v4.0ã¨åŒæ™‚é–‹ç™º
- **B**: v4.1ã§åˆ†é›¢
- **C**: v4.2ä»¥é™

**Recommendation**: **Option B**ï¼ˆv4.1ï¼‰to focus on core first

### 4. ãƒãƒã‚¿ã‚¤ã‚ºæˆ¦ç•¥
**Options**:
- **A**: å®Œå…¨ç„¡æ–™ï¼ˆå¯„ä»˜ãƒ™ãƒ¼ã‚¹ï¼‰
- **B**: Freemiumï¼ˆCloud sync premiumï¼‰
- **C**: Open Coreï¼ˆEnterpriseæ©Ÿèƒ½æœ‰æ–™ï¼‰

**Recommendation**: **Option C**ï¼ˆOpen Coreï¼‰for sustainability

### 5. æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç§»è¡Œ
**Concern**: v3.0 â†’ v4.0ã§ç ´å£Šçš„å¤‰æ›´

**Mitigation**:
- [ ] Migration guide
- [ ] v3.x LTS supportï¼ˆ6 monthsï¼‰
- [ ] Automated migration tool
- [ ] Community support

---

## ğŸ“š Related Documents

**Strategic**:
- [V4.0_STRATEGIC_PIVOT.md](../ai_docs/V4.0_STRATEGIC_PIVOT.md) - Full strategic overview
- [V4.0_README_DRAFT.md](../ai_docs/V4.0_README_DRAFT.md) - New README

**Technical**:
- [V4.0_IMPLEMENTATION_ROADMAP.md](../ai_docs/V4.0_IMPLEMENTATION_ROADMAP.md) - Implementation plan
- [V4.0_COMPETITIVE_ANALYSIS.md](../ai_docs/V4.0_COMPETITIVE_ANALYSIS.md) - Market analysis

**Related Issues**:
- #331: MCP Enhancement Roadmap
- #345: GraphDB Memory Integration
- #348: Neural Memory Research

---

## ğŸ’¬ Discussion Points

### For Community Feedback

1. **Direction**: Do you agree with the pivot to Memory Platform?
2. **Features**: Which features are most important to you?
   - [ ] MCP integration
   - [ ] Consumer app
   - [ ] Self-hosted API
   - [ ] Cloud SaaS
   - [ ] GitHub connector
   - [ ] Other:ï¼ˆcomment belowï¼‰
3. **Concerns**: Any risks or concerns about this pivot?
4. **Use Cases**: How would you use Kagura v4.0?

### For Contributors

1. **Skill Areas**: Where can you contribute?
   - [ ] Core developmentï¼ˆPythonï¼‰
   - [ ] MCP tools
   - [ ] Consumer appï¼ˆFlutterï¼‰
   - [ ] Documentation
   - [ ] Testing
   - [ ] Designï¼ˆUI/UXï¼‰
   - [ ] Marketing
2. **Timeline**: Any concerns about the 8-12 month timeline?
3. **Technical**: Feedback on architecture decisions?

---

## âœ… Next Steps

### If Approved
1. [ ] Create v4.0.0-alpha milestone
2. [ ] Break down into implementable issues
3. [ ] Set up project board
4. [ ] Announce pivotï¼ˆblog postï¼‰
5. [ ] Start Phase A implementation

### If Not Approved
- Iterate on this RFC based on feedback
- Consider alternative approaches
- Re-submit for discussion

---

## ğŸ™‹ Questions?

Please comment below with:
- Questions
- Concerns
- Suggestions
- Alternative proposals

**All feedback welcome!** This is a major strategic decision and we want to get it right.

---

**Author**: @jfk
**Co-authored**: Claude Code, ChatGPT 5 Pro
**Date**: 2025-10-25
**Status**: ğŸ“‹ Proposalï¼ˆAwaiting Community Feedbackï¼‰

---

## ğŸ“ Appendix: Implementation Piecesï¼ˆChatGPT 5 Proï¼‰

Provided implementation codeï¼ˆzipãƒ•ã‚¡ã‚¤ãƒ«ï¼‰:

1. **nmn_poc_v02.zip**: Memory API v0.2ï¼ˆpgvector + FastAPIï¼‰
2. **nmn_poc_v01.zip**: Minimal in-memory prototype
3. **nmn_mcp_tools.zip**: MCP tools serverï¼ˆrecall/feedback/forgetï¼‰
4. **nmn_bench.zip**: Benchmark suiteï¼ˆpgvector/FAISSï¼‰

These can jumpstart Phase A implementation.

---

**Let's build the future of AI memory together!** ğŸš€
