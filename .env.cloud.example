# Kagura Memory Cloud - Environment Variables for GCP Deployment
# https://github.com/JFK/kagura-ai/issues/649
#
# Setup Instructions:
#   1. Copy this file to .env: cp .env.cloud.example .env
#   2. Fill in all values (especially passwords and secrets)
#   3. Never commit .env to git!

# ============================================================================
# Database Configuration (Cloud SQL PostgreSQL)
# ============================================================================
# Get this from Terraform output: terraform output -raw database_url
DATABASE_URL=postgresql://kagura_admin:YOUR_DB_PASSWORD@CLOUD_SQL_IP:5432/kagura

# ============================================================================
# Redis Configuration (Memorystore)
# ============================================================================
# Get this from Terraform output: terraform output -raw redis_url
REDIS_URL=redis://REDIS_HOST:6379

# ============================================================================
# Qdrant Configuration (Local Container)
# ============================================================================
QDRANT_URL=http://qdrant:6333

# ============================================================================
# Domain Configuration
# ============================================================================
DOMAIN=memory.yourdomain.com
ALLOWED_ORIGINS=https://memory.yourdomain.com,https://claude.ai,https://chat.openai.com

# Caddy admin email for Let's Encrypt
CADDY_ADMIN_EMAIL=admin@yourdomain.com

# ============================================================================
# Security (Generate strong random values!)
# ============================================================================
# API Key encryption secret (use: openssl rand -hex 32)
API_KEY_SECRET=CHANGE_ME_TO_RANDOM_HEX_STRING

# JWT secret for session tokens (use: openssl rand -hex 32)
JWT_SECRET=CHANGE_ME_TO_RANDOM_HEX_STRING

# ============================================================================
# Google OAuth2 Configuration
# ============================================================================
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET
GOOGLE_REDIRECT_URI=https://memory.yourdomain.com/api/v1/auth/google/callback

# ============================================================================
# OpenAI API (Embeddings - Required for e2-medium VMs)
# ============================================================================
# Get from: https://platform.openai.com/api-keys
# Recommended for small VMs (4GB RAM) - no local model loading needed
OPENAI_API_KEY=sk-proj-...

# Embedding Configuration (set in docker-compose.cloud.yml)
# Default: OpenAI text-embedding-3-small ($0.02/1M tokens, 1536 dims)
# Alternative: sentence-transformers (requires 8GB+ RAM)
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-small

# ============================================================================
# Application Configuration
# ============================================================================
ENVIRONMENT=production
LOG_LEVEL=info

# ============================================================================
# Backend Configuration (Issue #554)
# ============================================================================
# GraphMemory backend: "json" (default) or "postgres" (experimental)
GRAPH_BACKEND=json

# Persistent Memory backend: "sqlite" (default) or "postgres" (experimental)
# Note: postgres backend requires SQLAlchemy and full schema setup
PERSISTENT_BACKEND=sqlite

# LLM Cache backend: "memory" (default) or "redis"
CACHE_BACKEND=redis

# RAG/Vector backend: "chromadb" (default) or "qdrant"
# Both work with OpenAI embeddings (no local model needed)
VECTOR_BACKEND=chromadb

# Note: When using postgres/redis/qdrant backends, respective URLs are required

# ============================================================================
# Optional: Observability
# ============================================================================
# SENTRY_DSN=https://xxx@sentry.io/xxx
# DATADOG_API_KEY=xxx
